(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(13),r=n.n(i),o=(n(48),n(49),n(85)),s=n(99),l=n(87),d=n(88),u=n.p+"static/media/logo.3da5d96a.svg",j=n(89),f="#002F76",b="#FDFCFC",h=n(3),g=Object(o.a)((function(e){return Object(s.a)({root:{flexGrow:1,width:"100%"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:f,paddingLeft:10,fontWeight:"bold",textAlign:"left"},appBar:{backgroundColor:b,maxHeight:60},navButton:{color:f,fontWeight:"bold"}})}));function p(){var e=g();return Object(h.jsx)("div",{className:e.root,children:Object(h.jsx)(l.a,{elevation:1,position:"fixed",className:e.appBar,children:Object(h.jsxs)(d.a,{children:[Object(h.jsx)("img",{src:u,alt:""}),Object(h.jsx)(j.a,{variant:"h6",className:e.title,children:"Spacestagram Challenge"})]})})})}var O=n(91),m=n(92),x=n(93),v=n(96),D=n(95),y=n(94),E=n(35),C=n.n(E),I=n(97),k=n(23),w=n(90),N=Object(o.a)({root:{padding:0}});function T(e){var t=N(),n=Object(a.useState)(e.description.length>80),c=Object(k.a)(n,2),i=c[0],r=c[1];return Object(h.jsxs)("span",{children:[Object(h.jsx)(j.a,{variant:"body2",component:"p",children:i?e.description.substring(0,80)+"...":e.description}),i?Object(h.jsx)(w.a,{className:t.root,onClick:function(){r(!1)},children:"See More"}):Object(h.jsx)(w.a,{className:t.root,onClick:function(){r(!0)},children:"See Less"})]})}var A=Object(o.a)({root:{minWidth:"20%",margin:15,flexBasis:"100%"},media:{height:"50vh"}});function M(e){var t=A(),n=Object(O.a)(),a=Object(m.a)(n.breakpoints.up("sm"));return Object(h.jsxs)(x.a,{className:t.root,elevation:4,style:a?{maxWidth:"50%"}:{maxWidth:"90%"},children:[Object(h.jsx)(y.a,{className:t.media,image:e.imageURL,title:e.title}),Object(h.jsxs)(D.a,{children:[Object(h.jsx)(j.a,{variant:"h6",component:"h3",children:e.title}),Object(h.jsx)(j.a,{variant:"subtitle2",component:"h4",children:e.date}),Object(h.jsx)(T,{description:e.description})]}),Object(h.jsx)(v.a,{children:Object(h.jsx)(I.a,{style:{marginLeft:"auto"},"aria-label":"like the image",onClick:function(){e.onLike(e.date,!e.liked)},children:Object(h.jsx)(C.a,{color:e.liked?"primary":"inherit"})})})]})}var G=n(10),R=n(98);function S(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}function F(e){var t=e.split("-");return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]))}function _(e){return S(function(e){return new Date(e.getTime()+432e6)}(F(e)))}function B(e){return S(function(e){return new Date(e.getTime()+5184e5)}(F(e)))}var L=Object(o.a)((function(e){return Object(s.a)({root:{backgroundColor:"#fafafa",flexGrow:1,width:"100%",display:"flex",flexFlow:"row wrap",justifyContent:"center",alignItems:"flex-start",alignContent:"center"}})}));function P(){var e=L(),t=Object(a.useReducer)((function(e,t){switch(t.type){case"ADD_IMAGES":return Object(G.a)(Object(G.a)({},e),{},{images:e.images.concat(t.images)});case"FETCHING_IMAGES":return Object(G.a)(Object(G.a)({},e),{},{fetching:t.fetching});case"UPDATE_IMAGES":return Object(G.a)(Object(G.a)({},e),{},{images:t.images});case"INCREMENT_DATE":return Object(G.a)(Object(G.a)({},e),{},{startDate:_(e.startDate),endDate:_(e.endDate)});default:return e}}),{images:[],fetching:!0}),n=Object(k.a)(t,2),c=n[0],i=n[1],r=Object(a.useReducer)((function(e,t){switch(t.type){case"INCREMENT_DATE":var n=B(e.endDate);return F(n).getTime()>Date.now()?Object(G.a)(Object(G.a)({},e),{},{startDate:B(e.startDate),endDate:S(new Date),endReached:!0}):Object(G.a)(Object(G.a)({},e),{},{startDate:B(e.startDate),endDate:B(e.endDate)});default:return e}}),{startDate:"2021-08-02",endDate:_("2021-08-02"),endReached:!1}),o=Object(k.a)(r,2),s=o[0],l=o[1];function d(e,t){var n=[];c.images.forEach((function(a){a.date===e&&(a.liked=t),n.push(a)})),i({type:"UPDATE_IMAGES",images:n})}Object(a.useEffect)((function(){i({type:"FETCHING_IMAGES",fetching:!0}),fetch("https://api.nasa.gov/planetary/apod?start_date=".concat(s.startDate,"&end_date=").concat(s.endDate,"&api_key=").concat("w69bgK6Knx7POdvxMQHyKvcnPhKch9MqP32ISUV0")).then((function(e){return e.json()})).then((function(e){e.forEach((function(e){e.liked=!1})),i({type:"ADD_IMAGES",images:e}),i({type:"FETCHING_IMAGES",fetching:!1})})).catch((function(e){return i({type:"FETCHING_IMAGES",fetching:!1}),e}))}),[i,s.endDate]);var u=Object(a.useRef)(null),j=Object(a.useCallback)((function(e){new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&!s.endReached&&l({type:"INCREMENT_DATE"})}))})).observe(e)}),[l,s.endReached]);return Object(a.useEffect)((function(){u.current&&j(u.current)}),[j,u]),Object(h.jsxs)("div",{className:e.root,children:[c.images.map((function(e){return Object(h.jsx)(M,{imageURL:e.url,title:e.title,date:e.date,description:e.explanation,liked:e.liked,onLike:d},e.date)})),c.fetching?Object(h.jsx)("div",{style:{backgroundColor:"#fafafa",flexBasis:"100%",display:"flex",justifyContent:"center"},children:Object(h.jsx)(R.a,{style:{marginTop:40,marginBottom:40}})}):null,s.endReached?Object(h.jsx)("div",{style:{backgroundColor:"#fafafa",flexBasis:"100%",display:"flex",justifyContent:"center"},children:Object(h.jsx)("p",{children:"You've caught up to today!"})}):null,Object(h.jsx)("div",{id:"page-bottom-boundary",style:{width:"100%"},ref:u})]})}var H=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(p,{}),Object(h.jsx)("div",{style:{paddingTop:80,backgroundColor:"#fafafa"},children:Object(h.jsx)(P,{})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(H,{})}),document.getElementById("root")),U()}},[[59,1,2]]]);
//# sourceMappingURL=main.a1e5ee9d.chunk.js.map